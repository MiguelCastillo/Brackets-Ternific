{"version":3,"file":"spromise.min.js","sources":["spromise.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","spromise","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_result","input","args","context","apply","All","values","checkPending","remaining","promise","resolve","resolutions","index","arguments","processQueue","item","then","reject","Promise","defer","async","./async","./promise",2,"Async","cb","nextTick","delay","callback","timeout","setTimeout","bind","process","setImmediate",3,"resolver","stateManager","StateManager","target","onResolved","onRejected","transition","states","resolved","rejected","always","done","catch","fail","notify","state","constructor","options","pending","value","Resolution","printDebug","ex","Factory","debug","console","error","stack","log","strStates","prototype","enqueue","isPending","isResolved","isRejected","ms","_self","TaskAction","TaskManager","asyncTask","queue","push","asyncQueue","handler","runHandler","finalize","undefined","resolution","TypeError","runThenable","thenable","_asyncQueue","task","taskRunner","_runTask","shift","Array","slice",4,"Race","iterable","_resolve","_done","_reject",5,"when","all","race","./all","./race","./when",6,"When","results","reason"],"mappings":"CAAA,SAAUA,GAAG,GAAoB,gBAAVC,UAAoC,mBAATC,QAAsBA,OAAOD,QAAQD,QAAS,IAAmB,kBAATG,SAAqBA,OAAOC,IAAKD,UAAUH,OAAO,CAAC,GAAIK,EAAkCA,GAAb,mBAATC,QAAwBA,OAA+B,mBAATC,QAAwBA,OAA6B,mBAAPC,MAAsBA,KAAYC,KAAKJ,EAAEK,SAAWV,MAAO,WAAqC,MAAO,SAAUW,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAATC,UAAqBA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,IAAIhB,GAAE,GAAIqB,OAAM,uBAAuBL,EAAE,IAAK,MAAMhB,GAAEsB,KAAK,mBAAmBtB,EAAE,GAAIuB,GAAEV,EAAEG,IAAIf,WAAYW,GAAEI,GAAG,GAAGQ,KAAKD,EAAEtB,QAAQ,SAASU,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,EAAEA,EAAEF,IAAIY,EAAEA,EAAEtB,QAAQU,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGf,QAAkD,IAAI,GAA1CmB,GAAkB,kBAATD,UAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKW,GAAG,SAASP,EAAQjB,IAM/zB,WACC,YAKA,SAASyB,GAAQC,EAAOC,EAAMC,GAC5B,MAAsB,kBAAZ,GACDF,EAAMG,MAAMD,EAASD,OAEvBD,EAGT,QAASI,GAAIC,GAeX,QAASC,KACPC,IACKA,GACHC,EAAQC,QAAQb,KAAKM,EAASQ,GAKlC,QAASD,GAAQE,GACf,MAAO,YACLD,EAAYC,GAA8B,IAArBC,UAAUf,OAAee,UAAU,GAAKA,UAC7DN,KAIJ,QAASO,KACP,GAAIrB,GAAGsB,EAAMjB,CACb,KAAKL,EAAI,EAAGK,EAASU,EAAeV,EAAJL,EAAYA,IAC1CsB,EAAOT,EAAOb,GACVsB,GAA6B,kBAAdA,GAAKC,KACtBD,EAAKC,KAAKN,EAAQjB,GAAIgB,EAAQQ,SAG9BN,EAAYlB,GAAKO,EAAQe,GACzBR,KAtCND,EAASA,KAGT,IAAIK,MACAF,EAAcS,EAAQC,QACtBhB,EAAcrB,KACd0B,EAAcF,EAAOR,MAEzB,OAAKQ,GAAOR,QAoCZsB,EAAMN,GACCL,GApCEA,EAAQC,QAAQJ,GApB3B,GAAIY,GAAU1B,EAAQ,aAClB4B,EAAU5B,EAAQ,UA0DtBjB,GAAOD,QAAU+B,OAIhBgB,UAAU,EAAEC,YAAY,IAAIC,GAAG,SAAS/B,EAAQjB,IAOlD,WACC,YAIA,SAASiD,GAAMC,GACbC,EAASD,GAHX,GAAIC,EAMJF,GAAMG,MAAQ,SAASC,EAAUC,EAAS3B,GACxC4B,WAAWF,EAASxB,MAAM2B,KAAKH,EAAU9C,KAAMoB,OAAa2B,IAS5DH,EADsB,gBAAd,UAAuD,kBAAtBM,SAAgB,SAC9CA,QAAQN,SAEa,kBAAnB,cACFO,aAGA,SAASR,GAClBK,WAAWL,EAAI,IAInBD,EAAME,SAAWA,EACjBnD,EAAOD,QAAUkD,UAGbU,GAAG,SAAS1C,EAAQjB,IAMzB,WACC,YAqBA,SAAS2C,GAAQiB,EAAUC,GACzBA,EAAeA,GAAgB,GAAIC,EACnC,IAAIC,GAASxD,IAEbwD,GAAOtB,KAAO,SAASuB,EAAYC,GACjC,MAAOJ,GAAapB,KAAKuB,EAAYC,IAGvCF,EAAO5B,QAAU,WAEf,MADA0B,GAAaK,WAAWC,EAAOC,SAAU9B,UAAW/B,MAC7CwD,GAGTA,EAAOrB,OAAS,WAEd,MADAmB,GAAaK,WAAWC,EAAOE,SAAU/B,UAAW/B,MAC7CwD,GAITA,EAAO7B,SACLO,KAASsB,EAAOtB,KAChB6B,OAASP,EAAOO,OAChBC,KAASR,EAAOQ,KAChBC,QAAST,EAAOU,KAChBA,KAASV,EAAOU,KAChBC,OAASX,EAAOW,OAChBC,MAASZ,EAAOY,MAChBC,YAAcjC,GAGhBoB,EAAO7B,QAAQA,QAAU6B,EAAO7B,QAChC6B,EAAOtB,KAAKoB,aAAeA,EAEvBD,GACFA,EAAStC,KAAKyC,EAAQA,EAAO5B,QAAS4B,EAAOrB,QAqDjD,QAASoB,GAAae,GAEpBtE,KAAKoE,MAAQR,EAAOW,QAGhBD,GAAWA,EAAQF,OACrBpE,KAAK2D,WAAWW,EAAQF,MAAOE,EAAQE,MAAOF,EAAQjD,SAmG1D,QAASoD,GAAWH,GAClBtE,KAAK2B,QAAU2C,EAAQ3C,QA+HzB,QAAS+C,GAAWC,GACdC,EAAQC,QACVC,QAAQC,MAAMJ,GACVA,GAAMA,EAAGK,OACXF,QAAQG,IAAIN,EAAGK,QAQrB,QAASJ,GAAQvB,GACf,MAAO,IAAIjB,GAAQiB,GAhWrB,GAAIf,GAAQ5B,EAAQ,WAEhBkD,GACFW,QAAa,EACbV,SAAa,EACbC,SAAa,EACbC,OAAa,EACbI,OAAa,GAGXe,GACF,UACA,WACA,WA4CF9C,GAAQ+C,UAAUnB,KAAO,SAASrB,GAEhC,MADA3C,MAAKkC,KAAKoB,aAAa8B,QAAQxB,EAAOC,SAAUlB,GACzC3C,KAAK2B,SAGdS,EAAQ+C,UAAR/C,SAA0BA,EAAQ+C,UAAUjB,KAAO,SAASvB,GAE1D,MADA3C,MAAKkC,KAAKoB,aAAa8B,QAAQxB,EAAOE,SAAUnB,GACzC3C,KAAK2B,SAGdS,EAAQ+C,UAAR/C,WAA4BA,EAAQ+C,UAAUpB,OAAS,SAASpB,GAE9D,MADA3C,MAAKkC,KAAKoB,aAAa8B,QAAQxB,EAAOG,OAAQpB,GACvC3C,KAAK2B,SAGdS,EAAQ+C,UAAUhB,OAAS,SAASxB,GAElC,MADA3C,MAAKkC,KAAKoB,aAAa8B,QAAQxB,EAAOO,OAAQxB,GACvC3C,KAAK2B,SAGdS,EAAQ+C,UAAUf,MAAQ,WACxB,MAAOc,GAAUlF,KAAKkC,KAAKoB,aAAac,QAG1ChC,EAAQ+C,UAAUE,UAAY,WAC5B,MAAOrF,MAAKkC,KAAKoB,aAAac,QAAUR,EAAOW,SAGjDnC,EAAQ+C,UAAUG,WAAa,WAC7B,MAAOtF,MAAKkC,KAAKoB,aAAac,QAAUR,EAAOC,UAGjDzB,EAAQ+C,UAAUI,WAAa,WAC7B,MAAOvF,MAAKkC,KAAKoB,aAAac,QAAUR,EAAOC,UAGjDzB,EAAQ+C,UAAUtC,MAAQ,SAAe2C,GACvC,GAAIC,GAAQzF,IACZ,OAAO,IAAIoC,GAAQ,SAASR,EAASO,GACnCsD,EAAMvD,KAAK,WACTI,EAAMO,MAAMjB,EAAQqB,KAAKjD,MAAOwF,EAAIzD,YACnCI,EAAOc,KAAKjD,UAsBnBuD,EAAa4B,UAAUC,QAAU,SAAUhB,EAAOzB,GAWhD,QAAS+C,KACHpC,EAAac,QAAUA,GAASR,EAAOG,SAAWK,EACpDzB,EAAGrB,MAAMgC,EAAajC,QAASiC,EAAakB,OAErCZ,EAAOO,SAAWC,GACzBzB,EAAG5B,KAAKuC,EAAajC,QAASiC,EAAac,MAAOd,EAAakB,OAf9DxE,KAAKoE,MAMRuB,EAAYC,UAAUF,IALrB1F,KAAK6F,QAAU7F,KAAK6F,WAAaC,KAAKJ,EAQzC,IAAIpC,GAAetD,MAgBrBuD,EAAa4B,UAAUxB,WAAa,SAAUS,EAAOI,EAAOnD,GAC1D,IAAIrB,KAAKoE,MAAT,CAIApE,KAAKoE,MAAUA,EACfpE,KAAKqB,QAAUA,EACfrB,KAAKwE,MAAUA,CAEf,IAAIqB,GAAQ7F,KAAK6F,KACbA,KACF7F,KAAK6F,MAAQ,KACbF,EAAYI,WAAWF,MAK3BtC,EAAa4B,UAAUjD,KAAO,SAASuB,EAAYC,GACjD,GAAIJ,GAAetD,IASnB,IANAyD,EAAcA,GAAqC,kBAAjB,GAA+BA,EAAa,KAC9EC,EAAcA,GAAqC,kBAAjB,GAA+BA,EAAa,MAKxED,GAAcH,EAAac,QAAUR,EAAOC,WAC5CH,GAAcJ,EAAac,QAAUR,EAAOE,SAChD,MAAO,IAAI1B,GAAQ,KAAMkB,EAG3B,IAAI3B,GAAU,GAAIS,EAWlB,OAVAkB,GAAa8B,QAAQxB,EAAOO,OAAQ,SAAsBC,EAAOI,GAC/D,GAAIwB,GAAW5B,IAAUR,EAAOC,SAAaJ,GAAcC,EAAeA,GAAcD,CACpFuC,KACFxB,EAAQjB,EAAa0C,WAAW7B,EAAOI,EAAOxE,KAAM2B,EAASqE,IAG3DxB,KAAU,GACZ,GAAKC,IAAY9C,QAASA,IAAWuE,SAAS9B,EAAOI,EAAOxE,QAGzD2B,GAIT4B,EAAa0C,WAAa,SAAS7B,EAAOI,EAAOnD,EAASM,EAASqE,GAEjE,IACExB,EAAQwB,EAAQ1E,MAAMD,EAASmD,GAEjC,MAAMG,GAGJ,MAFAD,GAAWC,GACXhD,EAAQQ,OAAOpB,KAAKM,EAASsD,IACtB,EAGT,MAAiBwB,UAAV3B,MAA4BA,IAkBrCC,EAAWU,UAAUe,SAAW,SAAS9B,EAAOI,EAAOnD,GACrD,GAEIF,GAAOoD,EAFP6B,EAAapG,KACb2B,EAAa3B,KAAK2B,OAGtB,IAAI6C,EAAMxD,OAIR,GAHAG,EAAQqD,EAAM,GAGVrD,IAAUQ,EACZ4C,EAAU5C,EAAQQ,OAAOpB,KAAKM,EAAS,GAAIgF,WAAU,gEAKlD,IAAIlF,GAASA,EAAMkD,cAAgBjC,EACtCmC,EAAUpD,EAAMgD,OAAO,SAAwBC,EAAOI,GACpD4B,EAAWF,SAAS9B,EAAOI,EAAOxE,YAMjC,IAAcmG,SAAVhF,GAAiC,OAAVA,EAC9B,aAAa,IACX,IAAK,SACL,IAAK,WACHoD,EAAUvE,KAAKsG,YAAYnF,EAAOE,GAOrCkD,IACCH,IAAUR,EAAOC,SACnBlC,EAAQC,QAAQN,MAAMD,EAASmD,GAG/B7C,EAAQQ,OAAOb,MAAMD,EAASmD,KAQpCC,EAAWU,UAAUmB,YAAc,SAASC,EAAUlF,GACpD,GAAI+E,GAAapG,KACb6D,GAAa,CAEjB,KAEE,GAAI3B,GAAOqE,EAASrE,IACpB,IAAqB,kBAAX,GAYR,MAVAA,GAAKnB,KAAKwF,EAAU,WACb1C,IAAYA,GAAW,EAC1BuC,EAAWF,SAAStC,EAAOC,SAAU9B,UAAW/B,QAEjD,WACI6D,IAAYA,GAAW,EAC1BuC,EAAWzE,QAAQQ,OAAOb,MAAMtB,KAAM+B,eAInC,EAGX,MAAO4C,GAKL,MAJKd,IACHuC,EAAWzE,QAAQQ,OAAOpB,KAAKM,EAASsD,IAGnC,EAGT,OAAO,EAMT,IAAIgB,IACFa,eACAZ,UAAW,SAASa,GACyB,IAAvCd,EAAYa,YAAYV,KAAKW,IAC/BnE,EAAMqD,EAAYe,WAAWf,EAAYa,eAG7CT,WAAY,SAASF,GAEjBF,EAAYC,UADO,IAAjBC,EAAM7E,OACc6E,EAAM,GAGNF,EAAYe,WAAWb,KAGjDa,WAAY,SAASb,GACnB,MAAO,YAEL,IADA,GAAIY,GACIA,EAAOZ,EAAM,IACnBF,EAAYgB,SAASF,GACrBZ,EAAMe,UAIZD,SAAU,SAASF,GACjB,IACEA,IAEF,MAAM9B,GACJD,EAAWC,KAsBjBC,GAAQO,UAAY/C,EAAQ+C,UAK5BP,EAAQvC,MAAQ,WACd,MAAO,IAAID,IAQbwC,EAAQzC,OAAS,WACf,MAAO,IAAIC,GAAQ,KAAM,GAAImB,IAC3BlC,QAASrB,KACTwE,MAAOzC,UACPqC,MAAOR,EAAOE,aAclBc,EAAQhD,QAAUgD,EAAQ2B,SAAW,SAAU/B,GAC7C,GAAIA,EAAO,CACT,GAAIA,EAAMH,cAAgBjC,EACxB,MAAOoC,EAEJ,IAA2B,kBAAhBA,GAAU,KACxB,MAAO,IAAIpC,GAAQoC,EAAMtC,MAI7B,MAAO,IAAIE,GAAQ,KAAM,GAAImB,IAC3BlC,QAASrB,KACTwE,MAAOzC,UACPqC,MAAOR,EAAOC,aAUlBe,EAAQ/B,MAAQ,SAAe2C,GAC7B,GAAIpE,GAAOyF,MAAM1B,UAAU2B,MAAM/E,UAAW,EAC5C,OAAO,IAAIK,GAAQ,SAASR,GAC1BU,EAAMO,MAAMjB,EAAQqB,KAAKjD,MAAOwF,EAAIpE,MAKxCwD,EAAQhB,OAASA,EACjBgB,EAAQC,OAAS,EACjBpF,EAAOD,QAAUoF,OAGhBrC,UAAU,IAAIwE,GAAG,SAASrG,EAAQjB,IAMpC,WACC,YAIA,SAASuH,GAAKC,GACZ,MAAKA,GAIE,GAAI7E,GAAQ,SAASR,EAASO,GAMnC,QAAS+E,KACFC,IACHA,GAAQ,EAERvF,EAAQN,MAAMtB,KAAM+B,YAKxB,QAASqF,KACFD,IACHA,GAAQ,EAERhF,EAAOb,MAAMtB,KAAM+B,YAlBvB,GAAIpB,GAAGK,EAAQmG,GAAQ,CACvB,KAAKxG,EAAI,EAAGK,EAASiG,EAASjG,OAAYA,EAAJL,EAAYA,IAChDsG,EAAStG,GAAGuB,KAAKgF,EAAUE,KANtBhF,EAAQR,UAJnB,GAAIQ,GAAU1B,EAAQ,YAiCtBjB,GAAOD,QAAUwH,OAGhBxE,YAAY,IAAI6E,GAAG,SAAS3G,EAAQjB,IAMtC,WACC,YAEA,IAAI2C,GAAY1B,EAAQ,YACxB0B,GAAQE,MAAQ5B,EAAQ,WACxB0B,EAAQkF,KAAQ5G,EAAQ,UACxB0B,EAAQmF,IAAQ7G,EAAQ,SACxB0B,EAAQoF,KAAQ9G,EAAQ,UAExBjB,EAAOD,QAAU4C,OAGhBqF,QAAQ,EAAElF,UAAU,EAAEC,YAAY,EAAEkF,SAAS,EAAEC,SAAS,IAAIC,GAAG,SAASlH,EAAQjB,IAMlF,WACC,YAQA,SAASoI,KACP,GAAIxG,GAAUrB,KAAMoB,EAAOW,SAC3B,OAAO,IAAIK,GAAQ,SAASR,EAASO,GACnCZ,EAAIR,KAAKM,EAASD,GAAMc,KAAK,SAAS4F,GACpClG,EAAQN,MAAMD,EAASyG,IAEzB,SAASC,GACP5F,EAAOpB,KAAKM,EAAS0G,OAb3B,GAAI3F,GAAU1B,EAAQ,aAClBa,EAAUb,EAAQ,QAiBtBjB,GAAOD,QAAUqI,OAGhBJ,QAAQ,EAAEjF,YAAY,SAAS,IAAI"}